<!-- نفس الرأس والتصميم السابق بدون تغيير -->

<script>
  const weekdays = ["الأحد", "الاثنين", "الثلاثاء", "الأربعاء", "الخميس", "الجمعة", "السبت"];
  const today = new Date();
  const dayName = weekdays[today.getDay()];

  const gregorianDate = today.toLocaleDateString("ar-SA-u-ca-gregory", {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });

  const hijriDate = today.toLocaleDateString("ar-SA-u-ca-islamic-umalqura", {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });

  document.getElementById("dateInfo").innerHTML = `
    <strong>${dayName}</strong><br>
    التاريخ الميلادي: ${gregorianDate}<br>
    التاريخ الهجري: ${hijriDate}
  `;

  const events = [
    { name: "الراتب", day: 27 },
    { name: "التقاعد", day: 1 },
    { name: "الضمان المطور", day: 10 },
    { name: "ساند", day: 10 },
    { name: "حافز", day: 5 },
    { name: "دعم ريف (متغير)", day: 10 },
    { name: "الدعم الزراعي", day: 1 },
    { name: "حساب المواطن", day: 10 },
    { name: "الدعم العقاري", day: 24 },
    { name: "التأهيل الشامل", day: 26 }
  ];

  function adjustWeekend(date) {
    const day = date.getDay();
    if (day === 5) date.setDate(date.getDate() - 1);
    else if (day === 6) date.setDate(date.getDate() + 1);
    return date;
  }

  function updateCountdowns() {
    const now = new Date();
    const grid = document.getElementById("countdownGrid");
    grid.innerHTML = "";

    const countdowns = events.map(event => {
      let target = new Date(now.getFullYear(), now.getMonth(), event.day);
      if (target < now) {
        target = new Date(now.getFullYear(), now.getMonth() + 1, event.day);
      }
      target = adjustWeekend(target);

      const diff = target - now;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      return {
        name: event.name,
        time: diff,
        text: diff <= 0
          ? "تم الصرف ✅"
          : `متبقي ${days} يوم، ${hours} ساعة، ${minutes} دقيقة، ${seconds} ثانية`
      };
    });

    countdowns.sort((a, b) => a.time - b.time);

    countdowns.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<strong>${item.name}</strong><br>${item.text}`;

      if (item.name.includes("دعم ريف")) {
        card.style.background = "linear-gradient(45deg, #FFD700, #FF4500)";
        card.style.color = "#fff";
      }

      grid.appendChild(card);
    });
  }

  updateCountdowns();
  setInterval(updateCountdowns, 1000);
</script>
